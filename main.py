# -*- coding: utf-8 -*-
import json
import logging
import random
from typing import Optional
from datetime import datetime, date, time
from pathlib import Path

from telegram import Update
from telegram.ext import (
    ApplicationBuilder, CommandHandler, MessageHandler, ChatMemberHandler,
    ConversationHandler, ContextTypes, filters
)

# ===================== ะะะกะขะะะะะ =====================
TOKEN = "8215387975:AAHS_mMHzXBGtDVevEBiSwsLcLPChs7Yq7k"
CHAT_ID = -1001849339863  # ะพะฑัะธะน ัะฐั
DATA_FILE = Path("data.json")

logging.basicConfig(
    format="%(asctime)s | %(levelname)s | %(name)s | %(message)s",
    level=logging.INFO
)
logger = logging.getLogger("OnlyGirlsBot")

# ===================== ะฅะะะะะะะฉะ =====================
# state:
# users: {
#   user_id(str): {
#     "name" (HTML-ะบะปะธะบะฐะฑะตะปัะฝะพ ะฝะฐ ะฟัะพัะธะปั ะฟะพ ะฒะฒะตะดัะฝะฝะพะผั ะธะผะตะฝะธ),
#     "first_name", "username",
#     "nickname", "uid", "bday", "city",
#     "tiktok", "quote",
#     "pipisa", "last_pipisa", "last_prediction"
#   }
# }
# known_users: [int, ...]
# last_lesbi_date: "YYYY-MM-DD"
# last_lesbi_pair: [user_id_a(int), user_id_b(int)]
state = {
    "users": {},
    "known_users": [],
    "last_lesbi_date": None,
    "last_lesbi_pair": None
}

def load_state():
    if DATA_FILE.exists():
        try:
            data = json.loads(DATA_FILE.read_text(encoding="utf-8"))
            state.update(data)
        except Exception as e:
            logger.warning(f"ะะต ัะดะฐะปะพัั ะทะฐะณััะทะธัั data.json: {e}")

def save_state():
    try:
        DATA_FILE.write_text(json.dumps(state, ensure_ascii=False, indent=2), encoding="utf-8")
    except Exception as e:
        logger.error(f"ะัะธะฑะบะฐ ัะพััะฐะฝะตะฝะธั data.json: {e}")

load_state()

# ===================== ะะกะะะะะะะขะะะฌะะซะ =====================
def today_str() -> str:
    return date.today().isoformat()

def ensure_user(user_id: int, first_name: Optional[str] = None, username: Optional[str] = None):
    suid = str(user_id)
    if suid not in state["users"]:
        state["users"][suid] = {
            "name": "",
            "first_name": first_name or "",
            "username": username or "",
            "nickname": "",
            "uid": "",
            "bday": "",
            "city": "",
            "tiktok": "",
            "quote": "",
            "pipisa": 0.0,
            "last_pipisa": None,
            "last_prediction": None,
        }
    else:
        if first_name:
            state["users"][suid]["first_name"] = first_name
        if username:
            state["users"][suid]["username"] = username

    if user_id not in state.get("known_users", []):
        state["known_users"].append(user_id)

def tg_link_from_id(user_id: int, text: str) -> str:
    return f'<a href="tg://user?id={user_id}">{text}</a>'

def display_user(user_id: int) -> str:
    """ะัะฐัะธะฒะพะต ะธะผั ััะฐััะฝะธัั: ะฒะฒะตะดัะฝะฝะพะต ะธะผั (ะบะปะธะบะฐะฑะตะปัะฝะพ), ะธะปะธ first_name/username, ะธะปะธ ัััะปะบะฐ ะฟะพ id."""
    suid = str(user_id)
    u = state["users"].get(suid)
    if u:
        if u.get("name"):
            return u["name"]
        if u.get("first_name"):
            return tg_link_from_id(user_id, u["first_name"])
        if u.get("username"):
            return "@" + u["username"]
    return tg_link_from_id(user_id, "ะดะตะฒะพัะบะฐ")

def is_url(s: str) -> bool:
    return isinstance(s, str) and (s.startswith("http://") or s.startswith("https://"))

# ===================== ะะะะะะขะกะขะะะ ะะะะซะฅ =====================
async def greet_new_member(update: Update, context: ContextTypes.DEFAULT_TYPE):
    cmu = update.chat_member
    if not cmu:
        return
    old = cmu.old_chat_member.status
    new = cmu.new_chat_member.status

    if (old in ("left", "kicked")) and (new in ("member", "administrator", "creator")):
        user = cmu.new_chat_member.user
        ensure_user(user.id, user.first_name, user.username)
        save_state()

        text = (
            f"ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั, {user.mention_html()}โฃ๏ธ "
            f'ะะทะฝะฐะบะพะผััั ะฟะพะถะฐะปัะนััะฐ ั ะฟัะฐะฒะธะปะฐะผะธ ะบะปะฐะฝะฐ '
            f'(<a href="https://telegra.ph/Pravila-klana-%E0%A6%90OnlyGirls%E0%A6%90-05-29">ะทะดะตัั</a>)๐ซถ '
            f"ะะฐะถะฝะฐั ะธะฝัะพัะผะฐัะธั ะฒัะตะณะดะฐ ะฒ ะทะฐะบัะตะฟะตโ๏ธ ะะปะฐะฝะพะฒะฐั ะฟัะธััะฐะฒะบะฐ: เฆ"
        )
        await context.bot.send_message(chat_id=cmu.chat.id, text=text, parse_mode="HTML")

# ะะฑะฝะพะฒะปัะตะผ known_users ะฟะพ ะปัะฑะพะผั ัะพะพะฑัะตะฝะธั
async def track_speaker(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if not update.effective_user:
        return
    u = update.effective_user
    ensure_user(u.id, u.first_name, u.username)
    save_state()

# ===================== /START ะธ /ABOUT =====================
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.effective_user
    ensure_user(user.id, user.first_name, user.username)
    save_state()
    await update.message.reply_text(
        "ะัะธะฒะตั! ะฏ โ ะะฐัั ะะพะณะธะฝั ะดะปั ะบะปะฐะฝะฐ OnlyGirls ๐\n"
        "ะะฐะฟะธัะธ /about ััะพะฑั ัะทะฝะฐัั ะผะพะธ ะบะพะผะฐะฝะดั."
    )

async def about(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "โจ ะะพะผะฐะฝะดั:\n"
        "/editprofile โ ะทะฐะฟะพะปะฝะธัั/ะพะฑะฝะพะฒะธัั ะฟัะพัะธะปั (ะฟะพัะฐะณะพะฒะพ)\n"
        "/profile โ ะฟะพะบะฐะทะฐัั ัะฒะพะน ะฟัะพัะธะปั\n"
        "/pipisa โ ะฒััะฐััะธัั/ัะผะตะฝััะธัั ะฟะธะฟะธัั (1 ัะฐะท ะฒ ะดะตะฝั)\n"
        "/top5 โ ัะพะฟ-5 ะฟะพ ะฟะธะฟะธัะต\n"
        "/rating โ ะฟะพะปะฝัะน ัะตะนัะธะฝะณ ะฟะธะฟะธั\n"
        "/predskaz โ ะฟัะตะดัะบะฐะทะฐะฝะธะต ะดะฝั (1 ัะฐะท ะฒ ะดะตะฝั)\n"
        "/hugs [@ัะทะตั] โ ะพะฑะฝะธะผะฐัะบะธ (ะดะปั ะฒัะตั ะธะปะธ ัะบะฐะทะฐะฝะฝะพะณะพ)\n"
        "/compliment [@ัะทะตั] โ ะบะพะผะฟะปะธะผะตะฝั (ะบะพะผั-ัะพ ะธะปะธ ัะฐะฝะดะพะผ)\n"
        "/lesbi โ ะปะตัะฑะธ-ะฟะฐัะฐ ะดะฝั (1 ัะฐะท ะฒ ะดะตะฝั)\n"
        "/role @ัะทะตั โ ยซะบัะพ ัะตะณะพะดะฝั ัะฐะผะฐัโฆยป\n"
        "/rules โ ะฟัะฐะฒะธะปะฐ ะบะปะฐะฝะฐ (ัััะปะบะฐ)"
    )

# ===================== /RULES (ัััะปะบะฐ) =====================
async def rules(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        'ะะพัะธะบ, ะฟัะฐะฒะธะปะฐ ะบะปะฐะฝะฐ <a href="https://telegra.ph/Pravila-klana-%E0%A6%90OnlyGirls%E0%A6%90-05-29">ะทะดะตัั</a> ๐ซถ',
        parse_mode="HTML"
    )

# ===================== ะะะะคะะะฌ (ะฟะพัะฐะณะพะฒะพ) =====================
(
    STEP_NAME,
    STEP_NICK,
    STEP_UID,
    STEP_BDAY,
    STEP_CITY,
    STEP_TIKTOK,
    STEP_QUOTE
) = range(7)

def render_profile(u: dict) -> str:
    name = u.get("name") or "ะฝะต ัะบะฐะทะฐะฝะพ"
    nickname = u.get("nickname") or ""
    uid = u.get("uid") or ""
    bday = u.get("bday") or "ะฝะต ัะบะฐะทะฐะฝะพ"
    city = u.get("city") or "ะฝะต ัะบะฐะทะฐะฝ"
    tiktok = u.get("tiktok") or ""
    quote = u.get("quote") or "โ"
    pipisa = float(u.get("pipisa") or 0.0)

    # TikTok ัััะพะบะฐ
    if tiktok:
        if is_url(tiktok):
            tt_line = f'๐ฒ TikTok: <a href="{tiktok}">TikTok</a>'
        else:
            at = tiktok if tiktok.startswith("@") else f"@{tiktok}"
            tt_line = f"๐ฒ TikTok: {at}"
    else:
        tt_line = "๐ฒ TikTok: ะฝะต ัะบะฐะทะฐะฝ"

    text = (
        f"๐โโ๏ธ ะะผั: {name}\n"
        f"๐ฎ ะะธะบ ะฒ ะธะณัะต: <code>{nickname}</code>\n"
        f"๐ข UID: <code>{uid}</code>\n"
        f"๐ ะะฐัะฐ ัะพะถะดะตะฝะธั: {bday}\n"
        f"๐ ะะพัะพะด: {city}\n"
        f"{tt_line}\n"
        f"๐ ะะธะฟะธัะฐ: {pipisa:.1f} ัะผ\n"
        f"๐ ะะตะฒะธะท: {quote}"
    )
    return text

async def profile(update: Update, context: ContextTypes.DEFAULT_TYPE):
    uid = str(update.effective_user.id)
    ensure_user(update.effective_user.id, update.effective_user.first_name, update.effective_user.username)
    u = state["users"].get(uid)
    await update.message.reply_text(render_profile(u), parse_mode="HTML")

async def editprofile(update: Update, context: ContextTypes.DEFAULT_TYPE):
    u = update.effective_user
    ensure_user(u.id, u.first_name, u.username)
    context.user_data["profile_answers"] = {}
    await update.message.reply_text("ะะฐะบ ัะตะฑั ะทะพะฒัั? (ะธะผั)")
    return STEP_NAME

async def step_name(update: Update, context: ContextTypes.DEFAULT_TYPE):
    typed = (update.message.text or "").strip()
    uid = update.effective_user.id
    clickable_name = tg_link_from_id(uid, typed if typed else (update.effective_user.first_name or "ะดะตะฒะพัะบะฐ"))
    context.user_data["profile_answers"]["name"] = clickable_name
    await update.message.reply_text("ะะฐะบะพะน ั ัะตะฑั ะฝะธะบ ะฒ ะธะณัะต?")
    return STEP_NICK

async def step_nick(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["profile_answers"]["nickname"] = (update.message.text or "").strip()
    await update.message.reply_text("ะะฐะบะพะน ั ัะตะฑั UID?")
    return STEP_UID

async def step_uid(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["profile_answers"]["uid"] = (update.message.text or "").strip()
    await update.message.reply_text("ะะพะณะดะฐ ั ัะตะฑั ะดะตะฝั ัะพะถะดะตะฝะธั? (ะฝะฐะฟัะธะผะตั, 01.01.2000 ะธะปะธ 01.01)")
    return STEP_BDAY

async def step_bday(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["profile_answers"]["bday"] = (update.message.text or "").strip()
    await update.message.reply_text("ะะท ะบะฐะบะพะณะพ ัั ะณะพัะพะดะฐ?")
    return STEP_CITY

async def step_city(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["profile_answers"]["city"] = (update.message.text or "").strip()
    await update.message.reply_text("ะััะฐะฒั TikTok: ัััะปะบั ะธะปะธ ะฟัะพััะพ ะฝะธะบ (@username):")
    return STEP_TIKTOK

async def step_tiktok(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["profile_answers"]["tiktok"] = (update.message.text or "").strip()
    await update.message.reply_text("ะะพะดะตะปะธัั ัะฒะพะธะผ ะดะตะฒะธะทะพะผ ะธะปะธ ะปัะฑะธะผะพะน ัะธัะฐัะพะน:")
    return STEP_QUOTE

async def step_quote(update: Update, context: ContextTypes.DEFAULT_TYPE):
    context.user_data["profile_answers"]["quote"] = (update.message.text or "").strip()
    suid = str(update.effective_user.id)
    ensure_user(update.effective_user.id, update.effective_user.first_name, update.effective_user.username)

    stored = state["users"][suid]
    for k, v in context.user_data["profile_answers"].items():
        stored[k] = v

    save_state()
    await update.message.reply_text("ะัะพัะธะปั ะพะฑะฝะพะฒะปัะฝ โ")
    return ConversationHandler.END

# ===================== /pipisa (1 ัะฐะท ะฒ ะดะตะฝั) =====================
PIPISA_UP_REACTIONS = [
    "ะะฝะฐ ัััะตะผะธััั ะบ ะฒะตััะธะฝะฐะผ! ๐",
    "ะะฟะตัะตะด ะธ ะฒััะต โ ะณะพัะดะธะผัั! ๐ฅณ",
    "ะขะฐะบ ัะฐัััั ัะพะปัะบะพ ะปะตะณะตะฝะดะฐ! ๐",
    "ะกะธัะตั ะธ ัะฐะดัะตั ัะพะทัะนะบั! โจ",
]
PIPISA_DOWN_REACTIONS = [
    "ะะธัะตะณะพ, ะทะฐะฒััะฐ ะฒะตัะฝัะผ ะฟะพะทะธัะธะธ ๐ช",
    "ะะฝะพะณะดะฐ ะธ ะณะตัะพัะผ ะฝัะถะตะฝ ะพัะดัั ๐ง๏ธ",
    "ะะฑะฝะธะผะตะผ โ ะธ ะฒัั ะฟัะพะนะดัั ๐ซ",
    "ะกะผะตะฝะธะผ ะฒะฐะนะฑ โ ะฟะพะนะดัั ะฒะฒะตัั ๐",
]

def _rand_delta():
    d = round(random.uniform(-10.0, 10.0), 1)
    if d == 0.0:
        d = 0.1 if random.random() > 0.5 else -0.1
    return d

async def pipisa(update: Update, context: ContextTypes.DEFAULT_TYPE):
    suid = str(update.effective_user.id)
    ensure_user(update.effective_user.id, update.effective_user.first_name, update.effective_user.username)
    u = state["users"][suid]

    if u.get("last_pipisa") == today_str():
        await update.message.reply_text("ะะธะฟะธัั ะผะพะถะฝะพ ัะฐััะธัั/ะผะตัะธัั ัะพะปัะบะพ ัะฐะท ะฒ ะดะตะฝั! ๐ฑ")
        return

    delta = _rand_delta()
    new_val = round(float(u.get("pipisa", 0.0)) + delta, 1)
    if new_val < 0:
        new_val = 0.0

    u["pipisa"] = new_val
    u["last_pipisa"] = today_str()
    save_state()

    if delta > 0:
        phrase = random.choice([
            f"๐ ะขะฒะพั ะฟะธะฟะธัะฐ ะฒััะพัะปะฐ ะฝะฐ {delta:.1f} ัะผ! {random.choice(PIPISA_UP_REACTIONS)} ะขะตะฟะตัั: {new_val:.1f} ัะผ.",
            f"๐ ะะณะพ! +{delta:.1f} ัะผ โ ะฒะพั ััะพ ัะพัั! {random.choice(PIPISA_UP_REACTIONS)} ะขะตะบััะธะน ัะฐะทะผะตั: {new_val:.1f} ัะผ.",
        ])
    else:
        phrase = random.choice([
            f"๐ ะัโฆ ะฟะธะฟะธัะฐ ัะผะตะฝััะธะปะฐัั ะฝะฐ {abs(delta):.1f} ัะผ. {random.choice(PIPISA_DOWN_REACTIONS)} ะกะตะนัะฐั: {new_val:.1f} ัะผ.",
            f"๐ ะะตะผะฝะพะณะพ ะฟัะพัะตะปะฐ ({abs(delta):.1f} ัะผ). {random.choice(PIPISA_DOWN_REACTIONS)} ะขะตะบััะธะน ัะฐะทะผะตั: {new_val:.1f} ัะผ.",
        ])
    await update.message.reply_text(phrase)

# ===================== ะะะะขะะะะ =====================
async def top5(update: Update, context: ContextTypes.DEFAULT_TYPE):
    rows = sorted(state["users"].items(), key=lambda kv: kv[1].get("pipisa", 0.0), reverse=True)[:5]
    if not rows:
        await update.message.reply_text("ะะตะนัะธะฝะณ ะฟััั. ะะพะปะธะฒะฐะน ะฟะธะฟะธัั ัะฐัะต ๐ฑ")
        return
    text = "๐ ะขะะ-5 ะฟะธะฟะธั ะบะปะฐะฝะฐ:\n"
    for i, (uid, u) in enumerate(rows, 1):
        text += f"{i}. {u.get('name') or display_user(int(uid))}: {u.get('pipisa', 0.0):.1f} ัะผ\n"
    await update.message.reply_text(text, parse_mode="HTML")

async def rating(update: Update, context: ContextTypes.DEFAULT_TYPE):
    rows = sorted(state["users"].items(), key=lambda kv: kv[1].get("pipisa", 0.0), reverse=True)
    if not rows:
        await update.message.reply_text("ะะตะนัะธะฝะณ ะฟััั. ะะพะปะธะฒะฐะน ะฟะธะฟะธัั ัะฐัะต ๐ฑ")
        return
    text = "๐ ะะพะปะฝัะน ัะตะนัะธะฝะณ ะฟะธะฟะธั:\n"
    for i, (uid, u) in enumerate(rows, 1):
        text += f"{i}. {u.get('name') or display_user(int(uid))}: {u.get('pipisa', 0.0):.1f} ัะผ\n"
    await update.message.reply_text(text, parse_mode="HTML")

# ===================== ะะะะะกะะะะะะะฏ (200 ัััะบ) =====================
PREDICTIONS = [
    # 1โ100 ัะฝะธะฒะตััะฐะปัะฝัะต
    "ะกะตะณะพะดะฝั ัะฒะพะน ะดะตะฝั โ ะดะฐะถะต ะตัะปะธ ะพะฑะปะฐัะฝะพ โ๏ธ",
    "ะฃะปัะฑะบะฐ ัะตัะธั ะฑะพะปััะต, ัะตะผ ะบะฐะถะตััั ๐",
    "ะะตะปะฐะน ะฟะพ ะปัะฑะฒะธ โ ะธ ะฑัะดะตั ะบะฐะนั ๐",
    "ะัะตะปะตะฝะฝะฐั ัะตะณะพะดะฝั ะฝะฐ ัะฒะพะตะน ััะพัะพะฝะต โจ",
    "ะขั ะฒะธะดะธัั ะฑะพะปััะต, ัะตะผ ะดััะณะธะต โ ะดะพะฒะตัััั ัะตะฑะต ๐๏ธ",
    "ะะฐะปะตะฝัะบะธะน ัะฐะณ ัะพะถะต ะดะฒะธะถะตะฝะธะต ะฒะฟะตััะด ๐ฃ",
    "ะกะปััะธ ะพััะฐัััั ัะปััะฐะผะธ โ ะฑัะดั ะฒััะต ๐๏ธ",
    "ะัััั ะดััะฐ ัะตะณะพะดะฝั ะฟะพัะฐะฝััะตั ๐",
    "ะขั โ ััั-ัะพ ยซะฟะพะฒะตะทะปะพยป ๐",
    "ะกะบะฐะถะธ ัะตะฑะต ยซะผะพะปะพะดะตัยป โ ัั ััะพ ััะปััะธัั ๐ฅฐ",
    "ะขะฐะผ, ะณะดะต ัะฒะพั ะฒะฝะธะผะฐะฝะธะต, ัะฐะผ ะธ ัะฒะพั ัะธะปะฐ ๐ฑ",
    "ะัััะตะต ะฝะฐัััะพะตะฝะธะต ะฟัะธัะพะดะธั ะฟะพัะปะต ััะฟะปะพะณะพ ัะฐั ๐ต",
    "ะงัะดะตัะฐ ะปัะฑัั ัะผะตะปัั โ ัะธัะบะฝะธ ัััั-ัััั ๐",
    "ะขั ัะบัะฐัะตะฝะธะต ััะพะณะพ ะดะฝั ๐ซ",
    "ะะฐะถะดัะน ะดะพะฑััะน ะถะตัั ะฒะพะทะฒัะฐัะฐะตััั ะฑัะผะตัะฐะฝะณะพะผ ๐ฏ",
    "ะขะตะฟะปะพ ะพั ัะฒะพะตะน ัะปัะฑะบะธ ัะถะต ัะฟะฐัะฐะตั ะผะธั ๐ท",
    "ะะดะพั-ะฒัะดะพั. ะัั ะฟะพ ัะธะปะฐะผ ๐ค",
    "ะขั ัะถะต ัะฟัะฐะฒะปัะปะฐัั โ ัะฟัะฐะฒะธัััั ะธ ัะตะนัะฐั ๐ฆ",
    "ะะตัั ัะตะฑะต ะณัะพะผัะต, ัะตะผ ัะพะผะฝะตะฝะธัะผ ๐",
    "ะัััั ะฑัะดะตั ะฝะตะผะฝะพะณะพ ะฟัะพัะต, ัะตะผ ะฒัะตัะฐ ๐",
    "ะะฐะถะต ะผะฐะปะตะฝัะบะฐั ะทะฐะฑะพัะฐ ะพ ัะตะฑะต โ ััะพ ะฟะพะฑะตะดะฐ ๐ธ",
    "ะะฐัะบะพะฒะพ ั ัะพะฑะพะน โ ะผะธั ะพัะฒะตัะธั ัะตะผ ะถะต ๐ซถ",
    "ะกะตะณะพะดะฝั ัะตะฑะต ะฟะพะฒะตะทัั ัะฐะผ, ะณะดะต ัั ะธัะบัะตะฝะฝะฐ ๐",
    "ะะฐะนะดะธ 10 ะผะธะฝัั ัะธัะธะฝั โ ััะพ ััะฟะตััะธะปะฐ ๐",
    "ะะพะทะฒะพะปั ัะตะฑะต ะพัะดัั ะฑะตะท ะพะฟัะฐะฒะดะฐะฝะธะน ๐งธ",
    "ะัะพ-ัะพ ะพัะตะฝั ะณะพัะดะธััั ัะพะฑะพะน โ ะฟัะฐะฒะดะฐ ๐",
    "ะขั ัะฐะผ, ะณะดะต ะฝัะถะฝะพ โ ะธ ะฒัั ะพะบะตะน ๐",
    "ะัะพัะต ะพัะฝะตัะธัั โ ะธ ััะฐะฝะตั ะปะตะณัะต โ๏ธ",
    "ะกะดะตะปะฐะน ะดะพะฑัะพ ะฒัะธัะฐัั โ ะบะฐะนั ะฒะตัะฝัััั ๐ซ",
    "ะกะผะตั โ ะปัััะธะน ัะฟััะฝะธะบ ะดะฝั ๐",
    "ะขะตัะผะพั ั ัะตะฟะปะพะผ ะตััั: ััะพ ัั โ๏ธ",
    "ะะธะบะฐะบะพะน ัะฟะตัะบะธ โ ัะพะปัะบะพ ัะธัะผ ัะตัะดัะฐ โค๏ธ",
    "ะขะฒะพะธ ะณัะฐะฝะธัั โ ััะพ ะฝะตะถะฝะพััั ะบ ัะตะฑะต ๐ก๏ธ",
    "ะกะตะณะพะดะฝั ะธะดะตะฐะปัะฝัะน ะดะตะฝั ะฝะต ะฑััั ะธะดะตะฐะปัะฝะพะน ๐งฉ",
    "ะกะดะตะปะฐะน ัะฐะณ ะธ ะฟะพัะผะพััะธ, ะบะฐะบ ะผะธั ะฟะพะดะฒะธะฝะตััั ๐ช",
    "ะัััั ะผัะทัะบะฐ ะดะฝั ะฑัะดะตั ะดะพะฑัะพะน ๐ง",
    "ะขั โ ะณะปะฐะฒะฝัะน ะฟะพะดะฐัะพะบ ะถะธะทะฝะธ ๐",
    "ะกะพะผะฝะตะฝะธะต ะฝะต ััะปะธั โ ััะปะธั ะพะฟัั ๐",
    "ะะดะต ะทะฐะฑะพัะฐ โ ัะฐะผ ะธ ัะธะปั ๐ฟ",
    "ะกะตะณะพะดะฝั ยซะผะพะถะฝะพยป ะณัะพะผัะต, ัะตะผ ยซะฝะฐะดะพยป ๐",
    "ะฃะฒะตัะตะฝะฝะพััั โ ััะพ ะผะฐะปะตะฝัะบะธะต ยซะฟะพะปััะธะปะพััยป ๐",
    "ะะต ะพะฑะตััะตะฝะธะฒะฐะน ัะพ, ััะพ ัะถะต ัะดะตะปะฐะปะฐ ๐",
    "ะะพะฑะปะฐะณะพะดะฐัะธ ัะตะฑั ะทะฐ ะฟัะพัะปัั ัะตะฑั ๐",
    "ะัััั ััะดะพะผ ะฑัะดัั ััะฟะปัะต ะปัะดะธ ๐งโ๐คโ๐ง",
    "ะกัะฐะฝั ัะตะฑะต ัะฐะผะพะน ะฝะตะถะฝะพะน ะฟะพะดััะณะพะน ๐",
    "ะััะธ ะผะตะดะปะตะฝะฝะตะต โ ะผััะปะธ ััะฐะฝัั ะผัะณัะต ๐",
    "ะะฒะธะณะฐะนัั ะฒ ัะตะผะฟะต ะดััะธ, ะฝะต ะผะฐัะฐัะพะฝะฐ ๐โโ๏ธ",
    "ะกัะฐะฒั ัะพัะบั ัะฐะผ, ะณะดะต ัััะฐะปะฐ โ ะผะพะถะฝะพ โ๏ธ",
    "ะะฐัะปัะถะตะฝะฝัะน ะพัะดัั โ ัะพะถะต ะดะตะนััะฒะธะต ๐",
    "ะกะตะณะพะดะฝั ัะตะฑั ะถะดัั ะผะฐะปะตะฝัะบะฐั ัะฐะดะพััั ๐",
    "ะขั โ ะฝะต ะทะฐะดะฐัะธ, ัั โ ัะตะปะพะฒะตะบ ๐",
    "ะะฐัะบะฐ ะบ ัะตะฑะต โ ะฝะต ัะพัะบะพัั, ะฐ ะฑะฐะทะฐ ๐งด",
    "ะัะดั ะฒะฝะธะผะฐัะตะปัะฝะฐ ะบ ะทะฝะฐะบะฐะผ โ ะฒัะตะปะตะฝะฝะฐั ัะตะฟัะตั โ๏ธ",
    "ะัะฑะตัะธ ะพะดะฝะพ ะดะตะปะพ ะธ ัะดะตะปะฐะน ะตะณะพ ะบัะฐัะธะฒะพ ๐",
    "ะะธัะตะณะพ ัััะฐัะฝะพะณะพ ะฒ ยซะฝะต ัะพััยป ๐ซ",
    "ะกะผะตะฝะธ ัะพะฝ ะฝะฐ ะฑะพะปะตะต ะดะพะฑััะน ๐",
    "ะขะฒะพั ัะฟะพะบะพะนััะฒะธะต ะฒะฐะถะฝะตะต ััะถะพะน ัะฟะตัะบะธ ๐งโโ๏ธ",
    "ะขั ะฒัั ะบะพะฝััะพะปะธััะตัั โ ะฒ ัะฐะผะบะฐั ะฒะพะทะผะพะถะฝะพะณะพ ๐๏ธ",
    "ะะต ััะฐะฒะฝะธะฒะฐะน โ ัั ะดััะณะฐั, ะธ ััะพ ะฟะปัั ๐",
    "ะัััั ะดะตะฝั ะฑัะดะตั ะผัะณะบะธะผ ะธ ััะฟะปัะผ ๐งฃ",
    "ะะฐะดะพััั ะฒ ะผะตะปะพัะฐั โ ะฝะฐะนะดะธ ััะธ ๐",
    "ะขั ัะธะปัะฝะตะต, ัะตะผ ัะตะฑะต ะบะฐะถะตััั ๐๏ธ",
    "ะะดะธะฝ ัะฐะณ ะทะฐ ัะฐะท โ ะธ ะณะพัะฐ ะผะตะฝััะต ๐๏ธ",
    "ะกะบะฐะถะธ ยซะดะฐยป ัะตะฑะต ะธ ยซะฝะตัยป ะปะธัะฝะตะผั ๐ง",
    "ะัะฑะตัะธ ัะตะฑั ะฑะตะท ััะฒััะฒะฐ ะฒะธะฝั ๐",
    "ะขะตะฑะต ะผะพะถะฝะพ ะฟัะพััะพ ะฑััั ๐ผ",
    "ะััััั โ ััะพ ัะพะถะต ััะฒััะฒะพ, ะฝะต ะฒัะฐะณ ๐ง๏ธ",
    "ะะฐะฑะพัะฐ ะพ ัะตะปะต โ ััะพ ะปัะฑะพะฒั, ะฐ ะฝะต ะทะฐะดะฐัะฐ ๐",
    "ะก ัะตะฑั ะฝะฐัะธะฝะฐะตััั ััั ะฒะพะบััะณ ๐ฏ๏ธ",
    "ะขะพ, ััะพ ัะฒะพั โ ัะตะฑั ะฝะฐะนะดัั ๐ฌ",
    "ะัะธะฑะบะฐ โ ะฝะต ัั, ะฐ ัะพะฑััะธะต ๐งฏ",
    "ะะฐะถะฝะพ: ัั ะดะตะปะฐะตัั ะดะพััะฐัะพัะฝะพ โ๏ธ",
    "ะกะตะณะพะดะฝั ัะปัะฑะบะฐ ะฝะฐะนะดัั ัะตะฑั ัะฐะผะฐ ๐",
    "ะฃ ัะตะฑั ัะพัะพัะธะน ะฒะบัั ะฝะฐ ะปัะดะตะน ๐",
    "ะกะฟัััั ัะตะปะตัะพะฝ โ ะฟะพะนะผะฐะน ัะตะฐะปัะฝะพััั ๐ค๏ธ",
    "ะะปะฐะฝ ยซะยป โ ััะพ ะฝะต ะฟะพัะฐะถะตะฝะธะต, ะฐ ะผัะดัะพััั ๐ง",
    "ะขั ะดะฐััั ะดััะณะธะผ ััะฒััะฒะพ ะดะพะผะฐ ๐ก",
    "ะขะฒะพั ยซะฝะต ัะพััยป ัะพะถะต ะดะพััะพะนะฝะพ ัะฒะฐะถะตะฝะธั ๐ท",
    "ะก ะบะฐะถะดัะผ ะดะฝัะผ ัั ะฒัั ัะตััะฝะตะต ั ัะพะฑะพะน ๐ญ",
    "ะะพะทะณ โ ะฝะต ะฒัะฐะณ, ะฟัะพััะพ ัััะฐะฒัะธะน ะดััะณ ๐ง",
    "ะัะฑะพั โ ััะพ ะฒะปะฐััั. ะกะตะณะพะดะฝั ะพะฝะฐ ั ัะตะฑั ๐",
    "ะขะตะฑั ะถะดัั ัะพะฒะฟะฐะดะตะฝะธะต, ะฒ ะบะพัะพัะพะต ัะปะพะถะฝะพ ะฝะต ะฟะพะฒะตัะธัั โจ",
    "ะขะฒะพะธ ัะปะพะฒะฐ ัะตะณะพะดะฝั ะบะพะผั-ัะพ ะพัะตะฝั ะฟะพะผะพะณัั ๐ฃ๏ธ",
    "ะขะฒะพั ะฝะตะถะฝะพััั โ ะผะพัะฝะตะต ััะผะฐ ะผะธัะฐ ๐ง",
    "ะัะฟัััะธ ัะพ, ััะพ ะฝะต ัะฒะพั โ ััะฐะฝะตั ะปะตะณัะต ๐",
    "ะกะตะณะพะดะฝั ะฝะฐัััะพะตะฝะธะต ัะธะฝะธัั ะฝะพัะพัะบะธ ะถะธะทะฝะธ ๐งถ",
    "ะขั ะทะฐะผะตัะฝะพ ะฒััะพัะปะฐ โ ะดะฐะถะต ะตัะปะธ ะฝะต ะฒะธะดะธัั ๐",
    "ะะพะฑะปะฐะณะพะดะฐัะธ ัััะพ โ ะธ ะพะฝะพ ะพัะฒะตัะธั ๐",
    "ะขั ะฟัะธะฝะพัะธัั ะฟะพััะดะพะบ ัะฐะพัั ๐ช๏ธโ๐",
    "ะขะฒะพั ะธะฝััะธัะธั ัะตะณะพะดะฝั โ ะปัััะธะน ะฝะฐะฒะธะณะฐัะพั ๐งญ",
    "ะกะผะตะปะพััั โ ััะพ ััะฟะพั ยซะฟะพะฟัะพะฑัะนยป ๐",
    "ะะตัะตัะพะผ ัะตะฑั ะถะดะตั ัััะฝะฐั ะฝะฐะณัะฐะดะฐ ๐ช",
    "ะะฑะฝะธะผะธ ัะตะฑั. ะกะธะปัะฝะพ. ะััะผะพ ัะตะนัะฐั ๐ซ",
    "ะขะฒะพั ะดะพะฑัะพัะฐ โ ัะตะดะบะฐั ะฒะฐะปััะฐ ๐",
    "ะขั ะฝะต ะพะฑัะทะฐะฝะฐ ะฑััั ัะธะปัะฝะพะน 24/7 ๐ชด",
    "ะกะตะณะพะดะฝั ะผะพะถะฝะพ ะฟัะพััะพ ะถะธัั ะฑะตะท ะฟะพะดะฒะธะณะพะฒ ๐ฟ",
    "ะะฝัััะธ ัะตะฑั ะฑะพะปััะต ัะฒะตัะฐ, ัะตะผ ะบะฐะถะตััั ๐ฏ๏ธ",
    "ะขั โ ััะดะพ, ะบะพัะพัะพะต ั ัะพะฑะพะน ะบะฐะถะดัะน ะดะตะฝั โจ",
    "ะกะฐะผะพะต ะปัััะตะต ะฒะฟะตัะตะดะธ โ ะธ ััะพ ะฑะปะธะทะบะพ ๐ฎ",

    # 101โ150 ะฟัะพ ะบัะฐัะพัั / ัะฐะผะพะพัะตะฝะบั
    "ะกะตะณะพะดะฝั ัั ะพัะพะฑะตะฝะฝะพ ะบัะฐัะธะฒะฐั โ ัะฐะบั ๐",
    "ะขะฒะพะธ ะณะปะฐะทะฐ ัะธััั ัััะต, ัะตะผ ะพะฑััะฝะพ โจ",
    "ะขะฒะพั ัะปัะฑะบะฐ โ ะปัััะธะน ัะฐะนะปะฐะนัะตั ๐",
    "ะะพะถะฐ ะณะพะฒะพัะธั ยซัะฟะฐัะธะฑะพยป ะทะฐ ะทะฐะฑะพัั ๐ง",
    "ะขั โ ัะพะดััะฐั ัััะตัะธะบะฐ ะดะฝั ๐จ",
    "ะะพะปะพัั ัะตะณะพะดะฝั ะบะฐะบ ะฒ ัะตะบะปะฐะผะต ๐โโ๏ธ",
    "ะขะฒะพะน ััะธะปั โ ะฒะดะพัะฝะพะฒะตะฝะธะต ะดะปั ะดััะณะธั ๐",
    "ะัะฐัะพัะฐ ะฒ ะดะตัะฐะปัั โ ั ัะตะฑั ะฒัั ะฑะปะตััะธั ๐",
    "ะขั โ ะณะฐะปะตัะตั ะฝะตะถะฝะพััะธ ะธ ะฒะบััะฐ ๐ผ๏ธ",
    "ะัะฑะพะต ะทะตัะบะฐะปะพ ัะตะณะพะดะฝั ัะฒะพั ัะฐะฝ-ะบะปัะฑ ๐",
    "ะกะตะปัะธ ัะตะณะพะดะฝั ะพะฑัะทะฐะฝะพ ัะปััะธัััั ๐ธ",
    "ะขะตะฑะต ะธะดัั ัะฟะพะบะพะนััะฒะธะต โ ัะธะบ ััะฐะนะป ๐งโโ๏ธ",
    "ะขั ะฒัะณะปัะดะธัั ัะฐะบ, ะฑัะดัะพ ะฒััะฟะฐะปะฐัั ะธะดะตะฐะปัะฝะพ ๐ดโจ",
    "ะขะฒะพั ยซะฑะตะท ัะธะปัััะฐยป โ ะปัััะต ะปัะฑะพะณะพ ัะธะปัััะฐ ๐",
    "ะกะฒะตัะธัััั ะธะทะฝัััะธ โ ััะพ ะทะฐะผะตัะฝะพ ๐",
    "ะขะฒะพะน ะพะฑัะฐะท โ ะฒะฐั ะดะฐะถะต ะฒ ะฟะธะถะฐะผะต ๐๐",
    "ะะฐะฝะธะบ โ ัะพะฟ! ะะฐะถะต ะตัะปะธ ะตะณะพ ะฝะตั ๐๐",
    "ะะตัะฝะธัั ะณะพะฒะพััั: ยซะผั ะฒะตะปะธะบะพะปะตะฟะฝัยป ๐๏ธ",
    "ะัะพะฒะธ ัะตะณะพะดะฝั ะดััะถะฐั ั ะบะพัะผะพัะพะผ ๐",
    "ะขั โ ะดะตะฒะพัะบะฐ ะพะฑะปะพะถะบะธ, ะฝะพ ัััะฝะพะน ๐งธ",
    "ะกะตะณะพะดะฝั ัั ัะพัะฝะพ ะฟะพะฟะฐะดััั ะฒ ััะธ-ัะพ ะผััะปะธ ๐ญ",
    "ะขะฒะพะธ ัะตััั โ ะผัะณะบะฐั ะฟะพัะทะธั ะปะธัะฐ ๐",
    "ะขั โ ะณะฐัะผะพะฝะธั ะฑะตะท ััะธะปะธะน ๐ผ",
    "ะฃ ัะตะฑั ะธะดะตะฐะปัะฝะฐั ะฟะพัะฐะดะบะฐ ัะปัะฑะบะธ ๐",
    "ะัะฐัะพัะฐ, ะบะพัะพัะฐั ะดะตะปะฐะตั ะผะธั ะดะพะฑัะตะต ๐",
    "ะขะฒะพั ะฟัะธัััััะฒะธะต โ ัััะตัะธัะตัะบะธะน ะฐะฟะณัะตะนะด ๐ซ",
    "ะกะตะณะพะดะฝั ัั โ ะผัะทะฐ ะดะปั ะบะพะณะพ-ัะพ ๐ป",
    "ะขะตะฑั ัะพัะตััั ัะธัะพะฒะฐัั ะฐะบะฒะฐัะตะปัั ๐จ๐ง",
    "ะ ะบะฐะถะดะพะผ ะดะฒะธะถะตะฝะธะธ โ ะณัะฐัะธั ๐ฆข",
    "ะขั โ ัะพั ัะฐะผัะน ะฒะฐะนะฑ ยซัั!ยป ๐ฅ",
    "ะะพัะผะตัะธัะบะฐ ะพัะดััะฐะตั โ ัั ะธ ัะฐะบ ัะธัะตัั โจ",
    "ะัะฐัะพัะฐ ะฑะตะท ััะผะฐ โ ัะฒะพะน ััะธะปั ๐ค",
    "ะขั โ ะดะพะบะฐะทะฐัะตะปัััะฒะพ, ััะพ ะฝะตะถะฝะพััั โ ัะธะปะฐ ๐ช๐ธ",
    "ะกะผะพััะธัััั ะดะพัะพะถะต, ัะตะผ ะฒัะต ััะตะฝะดั ๐",
    "ะขะฒะพะน ะฒะทะณะปัะด โ ะพัะดะตะปัะฝัะน ะฒะธะด ะธัะบััััะฒะฐ ๐ค",
    "ะขั โ ัะปะฐะดะบะธะน ะฑะฐะปะฐะฝั ะธ ััะพะถะตะฝะฝะพััั ๐ฏ",
    "ะขะตะฑะต ะธะดัั ะฒัั, ััะพ ัั ะปัะฑะธัั ๐",
    "ะกะตะณะพะดะฝั ัั โ ััะฟะปะฐั ัััะตัะธะบะฐ ะพัะตะฝะธ ๐",
    "ะญัะฐ ะฟััะดั ะฒะพะปะพั โ ัะตะดะตะฒั ๐จ",
    "ะขั โ ะผัะณะบะธะน ัะพะบัั ะผะธัะฐ ๐ท",
    "ะกะธัะน! ะะธั ะฝะต ะพัะปะตะฟะฝะตั, ะพะฝ ะฟัะธะฒัะบะฝะตั โ๏ธ",
    "ะขั โ ะณะปะฐะฒะฝะฐั ะผะพะดะตะปั ัะฒะพะตะณะพ ะดะฝั ๐",
    "ะัะฑะฐั ะฟะพะทะฐ โ ะบะฐะบ ะพะฑะปะพะถะบะฐ ๐",
    "ะขั โ ะบัะฐัะพัะฐ, ะบะพัะพัะฐั ะปะตัะธั ๐บ",
    "ะกะตะณะพะดะฝั ะฝะพะณัะธ โ ะทะฐะณะปัะดะตะฝัะต ๐โจ",
    "ะขะฒะพั ยซะบะฐะบ ะพะฑััะฝะพยป โ ัะถะต ะฟัะตะบัะฐัะฝะพ ๐ท",
    "ะขั โ ัะบัะฟะตัั ะฟะพ ะผะธะปะพัะต ๐ง",
    "ะขั โ ัะธะปััั ยซัะพะผะฐะฝัะธะบะฐยป ะฒ ัะตะฐะปัะฝะพััะธ ๐",
    "ะญััะตัะธะบะฐ ะฒ ัะตะปะต ัะตะปะพะฒะตะบะฐ โ ััะพ ัั ๐ซถ",

    # 151โ200 ะผะพัะธะฒะฐัะธั
    "ะะพะถะตัั ะผะตะฝััะต โ ะดะตะปะฐะน ะผะตะฝััะต. ะะพ ะดะตะปะฐะน ๐งฉ",
    "ะะฐัะฝะธ ั 5 ะผะธะฝัั โ ะธ ะฟะพะตะดะตั ๐ดโโ๏ธ",
    "ะขะฒะพั ะดะธััะธะฟะปะธะฝะฐ โ ััะพ ะทะฐะฑะพัะฐ, ะฐ ะฝะต ะบะฝัั ๐๏ธ",
    "ะะตะปะฐะน ัะธัะพ โ ัะตะทัะปััะฐั ัะบะฐะถะตั ะณัะพะผะบะพ ๐ข",
    "ะะตััะตะบัะธะพะฝะธะทะผ ะฒัะบะปััะตะฝ โ ะฟัะพะณัะตัั ะฒะบะปัััะฝ ๐",
    "ะะปะฐะฝะธััะน ะฟะพ-ัะตะฐะปัะฝะพะผั, ะฐ ะฝะต ยซะบะฐะบ ะฝะฐะดะพยป ๐๏ธ",
    "ะัััะต ััะฐะฑะธะปัะฝะพ, ัะตะผ ะธะดะตะฐะปัะฝะพ โ",
    "ะะฐะทัะตัะธ ัะตะฑะต ะพัะธะฑะฐัััั โ ััะพ ะฟััั ๐ค๏ธ",
    "ะกะดะตะปะฐะน ัะพะบัั ะฝะฐ ะพะดะฝะพะผ โ ะฑัะดะตั ะฟัะพััะฒ ๐ฏ",
    "ะะพะฟัะพัะธ ะฟะพะผะพัั โ ััะพ ะทัะตะปะพััั ๐ค",
    "ะะฐะทะดะตะปะธ ะทะฐะดะฐัั ะฝะฐ ะฐัะพะผั โ ะธ ะฒะฟะตััะด โ๏ธ",
    "ะกะดะตะปะฐะน ะฟะตัะฒัะผ ะดะตะปะพะผ ัะฐะผะพะต ะฟัะพััะพะต ๐งธ",
    "ะะธัะธ ะผะฐะปะตะฝัะบะธะต ะณะฐะปะพัะบะธ โ ะผะพะทะณ ะพะฑะพะถะฐะตั โ๏ธ",
    "ะัะดัั โ ัะฐััั ะฟะปะฐะฝะฐ, ะฝะต ะฑะพะฝัั ๐ด",
    "ะกัะฐะฒะฝะธ ัะตะฑั ั ัะพะฑะพะน ะฒัะตัะฐ โ ััะฟะตั ๐",
    "ะกัะฐะฒั ะดะตะดะปะฐะนะฝั ั ะปัะฑะพะฒัั โณ๐",
    "ะะต ััะปะพะถะฝัะน โ ะฒัะฑะธัะฐะน ะฟะพะฝััะฝะพะต ๐๏ธ",
    "ะกะดะตะปะฐะน ะฝะฐ 60% โ ััะพ ัะถะต ะพัะปะธัะฝะพ ๐ฅณ",
    "ะะพะฒะตััะน ะฟัะพัะตััั โ ัะตะทัะปััะฐั ะฟัะธะดัั ๐ช",
    "ะฃัะธัั ั ัะฑะพะตะฒ โ ัะฐะผ ะฟะพะดัะบะฐะทะบะธ ๐",
    "ะะบััะถะฐะน ัะตะฑั ะฟะพะดะดะตัะถะบะพะน โ ััะพ ัะพะฟ ๐งโ๐คโ๐ง",
    "ะขะฒะพั ัะบะพัะพััั โ ะฝะพัะผะฐะปัะฝะฐั ัะบะพัะพััั ๐ข",
    "ะัะฟะตะน ะฒะพะดั ะธ ะฟัะพะดะพะปะถะฐะน ๐ง",
    "ะะฐะณัะฐะดะธ ัะตะฑั ะทะฐ ะผะฐะปะตะฝัะบะธะน ัะฐะณ ๐ซ",
    "ะะพะฟัะพะฑัะน ะตัั ัะฐะท โ ัะถะต ะปะตะณัะต ๐",
    "ะะต ะฒัั ััะพัะฝะพ โ ะพัะดะตะปัะน ะฒะฐะถะฝะพะต ๐งญ",
    "ะะดะต ััะฝะพ, ัะฐะผ ะปะตะณัะต โ ัะฟัะพัะฐะน ๐งน",
    "ะกะดะตะปะฐะน ะฟะตัะฒัะน ัะตัะฝะพะฒะธะบ โ ะพะฝ ัะฟะฐัะฐะตั ๐",
    "ะะพะดัะผะฐะน ะฟะธััะผะตะฝะฝะพ โ ะฟัะพััะฝะธััั ๐๏ธ",
    "ะขะฒะพั ัะธััะตะผะฐ ัะฐะฑะพัะฐะตั โ ะฒะตัั ะตะน โ๏ธ",
    "ะฃ ัะตะฑั ะตััั ะฟัะฐะฒะพ ะฝะต ััะฟะตะฒะฐัั ๐ฌ",
    "ะกะพััะฐะฝัะน ัะฝะตัะณะธั โ ะณะพะฒะพัะธ ยซะฝะตัยป ๐",
    "ะกะผะพััะธ ะฝะฐ ะณะพัะธะทะพะฝั, ะฐ ะฝะต ะฝะฐ ััะผ ๐",
    "ะัะฑะตัะธ ะพะดะฝะพ ยซะดะฐยป ะฝะฐ ะดะตะฝั โ",
    "ะะตะปะฐะน ัััั-ัััั ะตะถะตะดะฝะตะฒะฝะพ โ ะฒะตะปะธะบะพะต ัะปััะธััั ๐",
    "ะัะผะตัะฐะน ะฟะพะฑะตะดั โ ะผะพะทะณั ะฝัะถะฝะฐ ะพะฑัะฐัะฝะฐั ัะฒัะทั ๐ง",
    "ะัะปะธ ัััะฐัะฝะพ โ ัะฐะทะดะตะปะธ ะฝะฐ ัะฐะณะธ ๐ช",
    "ะะพะฒะพะดะธ ะดะพ ยซะดะพััะฐัะพัะฝะพยป, ะฐ ะฝะต ยซะธะดะตะฐะปัะฝะพยป ๐งฉ",
    "ะะฐัะฐะปะปะตะปัะฝะพ โ ััะถะต, ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ โ ะปัััะต ๐งต",
    "ะขั ัะผะตะตัั โ ะฟัะพััะพ ะฝะฐัะฝะธ ะฟััะผะพ ัะตะนัะฐั ๐",
]

async def predskaz(update: Update, context: ContextTypes.DEFAULT_TYPE):
    suid = str(update.effective_user.id)
    ensure_user(update.effective_user.id, update.effective_user.first_name, update.effective_user.username)
    u = state["users"][suid]
    if u.get("last_prediction") == today_str():
        await update.message.reply_text("๐ฎ ะัะตะดัะบะฐะทะฐะฝะธะต ัะถะต ะฑัะปะพ ัะตะณะพะดะฝั!")
        return
    u["last_prediction"] = today_str()
    save_state()
    await update.message.reply_text(f"๐ฎ {random.choice(PREDICTIONS)}")

# ===================== HUGS =====================
HUGS_POOL = [
    "๐ค {a} ะบัะตะฟะบะพ ะพะฑะฝัะปะฐ {b} โ ัะตะฟะปะพ ะดะพััะฐะฒะปะตะฝะพ ะฟะพ ะฐะดัะตัั ๐งธ",
    "๐ {a} ะฝะตะถะฝะพ ะฟัะธะถะฐะปะฐัั ะบ {b} โ ะฟัััั ััะตะฒะพะณะธ ัะฐัั ๐ท",
    "๐ฅฐ {a} ัะพะณัะตะปะฐ {b} ัะฒะพะธะผะธ ะพะฑะฝะธะผะฐัะบะฐะผะธ โ ะทะฐััะดะธะปะฐัั ะปัะฑะพะฒัั!",
    "๐ซถ {a} ะธ {b} โ ัะตะณะพะดะฝั ัะฐะผัะน ะผะธะปัะน ะดััั!",
    "ะัะพ ะฝะต ะพะฑะฝะธะผะตััั โ ัะพั ะฝะต ะธะณัะฐะตั ะฒ ะบะฐััะพะผะบะต!",
    "๐ซ ะขะพะบัะธะบะพะฒ ัะพะถะต ะธะฝะพะณะดะฐ ะพะฑะฝะธะผะฐััโฆ ะฟะพ ะณะพะปะพะฒะตโฆ ัะฐะฑััะตัะบะพะน ๐",
    "ะะตัะตะดะฐั ะผัะณะบะพััั, ะทะฐะฑะพัั ะธ ะฟะตัะตะฝัะบั ๐ช โ {a} โ {b}",
    "ะัะตะฟะบะพ-ะบัะตะฟะบะพ ะธ ะพัะตะฝั ะฝะตะถะฝะพ โ ััะตะฟะตัะธ, ะณััััั! ๐ซ  {a} ะพะฑะฝัะปะฐ {b}",
    "ะัััั ััะตะฒะพะณะธ ัะผะตะฝััะฐัััั ะฝะฐ 50% ะฟะพัะปะต ััะธั ะพะฑัััะธะน ๐ธ  {a} ะดะปั {b}",
]

async def hugs(update: Update, context: ContextTypes.DEFAULT_TYPE):
    ensure_user(update.effective_user.id, update.effective_user.first_name, update.effective_user.username)
    me = update.effective_user
    if context.args:
        target = context.args[0]
        msg = random.choice([
            f"๐ค {me.mention_html()} ะพะฑะฝัะปะฐ {target}! ะขะตะฟะปะพ ะดะพััะฐะฒะปะตะฝะพ ๐งธ",
            f"๐ {me.mention_html()} ะพัะฟัะฐะฒะธะปะฐ ะพะฑัััะธั {target}. ะัั ะฑัะดะตั ัะพัะพัะพ ๐ท",
        ])
        await update.message.reply_text(msg, parse_mode="HTML")
        return

    pool = [uid for uid in state.get("known_users", []) if uid != me.id]
    if not pool:
        await update.message.reply_text("ะะฑะฝะธะผะฐัะบะธ ะดะปั ะฒัะตั ะฒ ัะฐัะต! ๐ซ")
        return
    target_id = random.choice(pool)
    a = me.mention_html()
    b = display_user(target_id)
    tpl = random.choice(HUGS_POOL)
    if "{a}" in tpl or "{b}" in tpl:
        text = tpl.format(a=a, b=b)
    else:
        text = f"{a} ะพะฑะฝัะปะฐ {b} โ {tpl}"
    await update.message.reply_text(text, parse_mode="HTML")

# ===================== ะะะะะะะะะะขะซ =====================
COMPLIMENTS = [
    "ะขั ัะตะณะพะดะฝั ัะฒะตัะธัััั ัะธะปัะฝะตะต ะทะฒะตะทะดั โจ",
    "ะขะฒะพั ัะปัะฑะบะฐ โ ะผะพะน ะปะธัะฝัะน ะฐะฝัะธัััะตัั ๐",
    "ะ ัะตะฑะต ัะพัะตัะฐะฝะธะต ัะธะปั ะธ ะฝะตะถะฝะพััะธ โ ะธะดะตะฐะปัะฝะพะต ๐",
    "ะก ัะพะฑะพะน ัััะฝะพ ะดะฐะถะต ะฒ ะดะพะถะดั โ๏ธ",
    "ะขั ะดะตะฒะพัะบะฐ-ะผะฐะณะธั โ ะฒัั ะฟะพะปััะฐะตััั โจ",
    "ะขะฒะพะธ ะณะปะฐะทะฐ โ ะบะฐะบ ะบะพัะผะพั, ัะพัะตััั ะฒ ะฝะธั ะฟัะพะฟะฐััั ๐",
    "ะขะฒะพะน ัะผะตั ะปะตัะธั ะปัััะต ะปัะฑะพะณะพ ัะฐั ๐ต",
    "ะขั ะดะตะปะฐะตัั ััะพั ัะฐั ัะตะฟะปะตะต ๐งธ",
    "ะก ัะพะฑะพะน ะดะฐะถะต ัะธะปัั ัะปัะฑะฐะตััั ๐",
    "ะัะพ ัะตะณะพะดะฝั ัะฐะผะฐั ะพัะฐัะพะฒะฐัะตะปัะฝะฐั? ะัะฐะฒะธะปัะฝะพ โ ัั ๐",
    "ะขั ะฒะดะพัะฝะพะฒะปัะตัั ะดะฒะธะณะฐัััั ะดะฐะปััะต ๐",
    "ะขะฒะพั ัะตัะดัะต โ ะดะพะผ ะดะปั ะฝะตะถะฝะพััะธ ๐ก",
    "ะขั ะธะท ัะตั, ััั ยซะฟัะพััะพยป โ ัะถะต ะฟัะตะบัะฐัะฝะพ ๐ท",
    "ะะฐะถะต ะตัะปะธ ะดะตะฝั ัะปะพะถะฝัะน โ ัั ะฒัั ัะฐะฒะฝะพ ััะฟะตั โญ๏ธ",
    "ะก ัะพะฑะพะน ัะพัะตััั ัะฒะพัะธัั ะธ ัะฐะดะพะฒะฐัััั ๐",
    "ะขั โ ัััะฝัะน ะฟะปะตะด ะฒ ััะพะผ ะผะธัะต ๐งถ",
    "ะขะฒะพะน ะฒะฐะนะฑ โ ัะธัััะน serotonin boost ๐ง",
    "ะะธั ััะฐะป ะปัััะต, ะบะพะณะดะฐ ัั ััะดะฐ ะฟัะธัะปะฐ ๐ค",
    "ะขั ะฑัะดัะพ ะธะท ะปัััะตะณะพ ัะฝะฐ โ ะธ ััะพ ัะตะฐะปัะฝะพััั ๐",
    "ะขะฒะพะน ััะธะปั โ ะพัะดะตะปัะฝะฐั ัะพัะผะฐ ะธัะบััััะฒะฐ ๐จ",
    "ะขั ัะผะตะตัั ัะพะณัะตัั ะพะดะฝะธะผ ัะพะพะฑัะตะฝะธะตะผ ๐ฅ",
    "ะขั โ ะพะดะฝะพ ะฑะพะปััะพะต ยซะฒะฐัยป ๐ซ",
    "ะขั ะดะตะปะฐะตัั ะฑัะดะฝะธ ะฟะพัะพะถะธะผะธ ะฝะฐ ะฟัะฐะทะดะฝะธะบ ๐",
    "ะก ัะพะฑะพะน ััะดะพะผ ัะฟะพะบะพะนะฝะตะต ะธ ัะฒะตัะปะตะต ๐",
    "ะขั โ ะฝะตะถะฝะพััั ะฒ ัะตะปะพะฒะตัะตัะบะพะผ ะฒะธะดะต ๐ซถ",
    "ะะพัะผะพั ะทะฐะฒะธะดัะตั ัะฒะพะตะน ะบัะฐัะพัะต ๐",
    "ะขั โ ัะฐ, ะฝะฐ ะบะพะณะพ ัะพัะตััั ัะฐะฒะฝััััั ๐ฟ",
    "ะขั ัะธัะตัั ะดะฐะถะต ะฑะตะท ัะฐะนะปะฐะนัะตัะฐ โจ",
    "ะขั ะฟัะตะบัะฐัะฝะฐ ะฑะตะท ยซะฝะพยป ะธ ยซะตัะปะธยป ๐",
    "ะขั โ ะปัััะฐั ะฒะตััะธั ัะตะฑั, ะฟัะพััะพ ะฟัะพะดะพะปะถะฐะน ๐",
    "ะขั โ ะฝะฐัะฐ ะณะพัะดะพััั ะธ ะปัะฑะพะฒั ๐",
    "ะขะฒะพั ะดะพะฑัะพัะฐ โ ัะตะดะบะพััั ะธ ัะพะบัะพะฒะธัะต ๐๏ธ",
    "ะขั โ ะณะปะฐะฒะฝะฐั ะดะตะฒะพัะบะฐ ััะพะณะพ ะดะฝั ๐",
    "ะขั ะดะตะปะฐะตัั ะผะธั ัััะฝะตะต ะพะดะฝะธะผ ะฟัะธัััััะฒะธะตะผ ๐ซง",
    "ะก ัะพะฑะพะน ะปัะฑะพะต ะดะตะปะพ ััะฐะฝะพะฒะธััั ะฟัะพัะต ๐งฉ",
    "ะขั ะฒัะตะณะดะฐ ัััั ะบัะฐัะธะฒะตะต, ัะตะผ ะฒัะตัะฐ ๐บ",
    "ะขั โ ะฟัะพััะพ ะฑะปะตัะบ! โจ",
    "ะขั โ ะทะฐััะด ะผะธะปะพัั ะฝะฐ ะฝะตะดะตะปั ๐ฃ",
    "ะขั โ ะฝะฐั ะผะฐะปะตะฝัะบะธะน ัะตะดะตะฒั ๐จ",
    "ะขั โ ะฒะธัะฐะผะธะฝ ัะฐะดะพััะธ ะณััะฟะฟั A ๐",
]

async def compliment(update: Update, context: ContextTypes.DEFAULT_TYPE):
    me = update.effective_user
    ensure_user(me.id, me.first_name, me.username)

    if context.args:
        target = context.args[0]
        await update.message.reply_text(f"{random.choice(COMPLIMENTS)} {target}")
        return

    pool = [uid for uid in state.get("known_users", []) if uid != me.id]
    if not pool:
        await update.message.reply_text(random.choice(COMPLIMENTS))
        return
    target_id = random.choice(pool)
    await update.message.reply_text(f"{random.choice(COMPLIMENTS)} {display_user(target_id)}", parse_mode="HTML")

# ===================== ะะะกะะ-ะะะะ (ะธะท ะฒัะตั ะธะทะฒะตััะฝัั) =====================
async def lesbi(update: Update, context: ContextTypes.DEFAULT_TYPE):
    pool = list(set(state.get("known_users", [])))
    if len(pool) < 2:
        await update.message.reply_text("ะะตะดะพััะฐัะพัะฝะพ ััะฐััะฝะธั ะดะปั ะฟะฐัั")
        return

    if state["last_lesbi_date"] == today_str() and state.get("last_lesbi_pair"):
        a, b = state["last_lesbi_pair"]
        await update.message.reply_text(
            f"๐ญ ะะฐัะฐ ะดะฝั ัะถะต ะฒัะฑัะฐะฝะฐ: {display_user(a)} + {display_user(b)} ๐",
            parse_mode="HTML"
        )
        return

    a, b = random.sample(pool, 2)
    state["last_lesbi_date"] = today_str()
    state["last_lesbi_pair"] = [a, b]
    save_state()

    lines = [
        "๐ ะกะตะณะพะดะฝััะฝัั ะปะตัะฑะธ-ะฟะฐัะฐ: {a} ะธ {b} ๐",
        "๐ซถ ะัะพ ะฑั ะผะพะณ ะฟะพะดัะผะฐัั! {a} ะธ {b} โ ะฟะฐัะฐ ะดะฝั!",
        "๐ ะะผัั ะฟะพะฟะฐะป ัะพัะฝะพ ะฒ ัะตะปั! {a} ะธ {b} ัะตะฟะตัั ะฒะผะตััะต ๐",
        "๐ ะัะฑะพะฒั ะฒะธัะฐะตั ะฒ ะฒะพะทะดััะต: {a} + {b} = โค๏ธ",
    ]
    msg = random.choice(lines).format(a=display_user(a), b=display_user(b))
    await context.bot.send_message(chat_id=CHAT_ID, text=msg, parse_mode="HTML")

# ===================== /role @ัะทะตั =====================
ROLES = [
    "ัะฐะผะฐั ะบัะฐัะธะฒะฐั ะดะตะฒะพัะบะฐ๐",
    "ัะฐะผะฐั ะผะธะปะฐั ะบะธัะบะฐ๐บ",
    "ัะฐะผะฐั ะฝะตะถะฝะฐั ะฟัะธะฝัะตััะฐ๐ธ",
    "ัะฐะผะฐั ะณััััะฝะฐั ะฟะตะปัะผะตัะบะฐ๐",
    "ัะฐะผะฐั ัะธัััะฐั ะทะฒัะทะดะพัะบะฐโจ",
    "ัะฐะผะฐั ะทะปะฐั ะฒะตะดัะผะพัะบะฐ๐งโโ๏ธ",
    "ัะฐะผะฐั ะผะพะดะฝะฐั ะธะบะพะฝะบะฐ๐",
    "ัะฐะผะฐั ะทะฐะณะฐะดะพัะฝะฐั ะดััะฐ๐",
    "ัะฐะผะฐั ัะฐะดัะถะฝะฐั ะฑัะปะพัะบะฐ๐",
    "ัะฐะผะฐั ะพะดะธะฝะพะบะฐั ัััะบะฐ๐ง",
    "ะบะฐะบะฐัะบะฐ ะดะฝั๐ฉ",
    "ะฑัะฝัะฐัะบะฐ ัะฐัะฐ๐ฅ",
    "ะฟัะธัะพะฒะฐะฝะฝะฐั ัะตั๐คฏ",
    "ะฟะปะฐะบัะฐ ะดะฝั๐ญ",
    "ะดัะฐะผะฐะบะฒะธะฝ ะฒะตัะตัะฐ๐",
    "ัะฐะผะฐั ะณัะพะผะบะฐั ะถะฐะฑะฐ๐ธ",
    "ะบะธัะบะฐ ั ัะฐัะฐะบัะตัะพะผ๐พ",
    "ะบะพัะพะปะตะฒะฐ ัะฟะฐะผะฐ๐ฑ",
    "ัะฐะผะฐั ะฝะตะฟัะตะดัะบะฐะทัะตะผะฐั๐ฒ",
    "ะดะตะฒะพัะบะฐ ะฒะฐะนะฑะฐ๐ง",
    "ัะฐะผะฐั ัััะตัะธัะฝะฐั ะฝะฐ ัะฐะนะพะฝะต๐จ",
    "ะธะฝััะฐ-ะดะธะฒะฐ ะดะฝั๐ธ",
    "ัะฐะผะฐั ะฟะพััะฐั ะฒ ะดััะต๐ค",
    "ัะฐะผะฐั ัะตะบัะธ ะฒ ะฟะธะถะฐะผะต๐",
    "ะบะพัะพะปะตะฒะฐ ะฒะตัะตัะธะฝะบะธ๐",
    "ะดะตะฒะพัะบะฐ ั ะบะพัะผะพัะพะผ ะฒ ะณะปะฐะทะฐั๐",
    "ะฑะพะณะธะฝั ัะปะธััะฐ๐",
    "ะดะตะฒะฐ ัะฐะพัะฐ๐ซฆ",
    "ัะตะบัะตัะฝัะน ะฐะณะตะฝั ัะฐัะฐ๐ต๏ธโโ๏ธ",
    "ะฟะตััะธะบ ะดะฝั๐",
    "ะบะพัะผะฐั ะฒัะตั ะฑัะฒัะธั๐",
    "ะบะพัะตะนะฝะฐั ะฑะพะณะธะฝัโ๏ธ",
    "ัะฐะผะฐั ะณัะพะผะบะฐั ัะถัะฝัะบะฐ๐",
    "ะดะตะฒะพัะบะฐ-ัััะฟัะธะท๐ฒ",
    "ัะปััะฐะนะฝัะน ะณะตะฝะธะน๐ง",
    "ะปะพะฒััะบะฐ ะดะปั ัะตัะดะตัโค๏ธโ๐ฅ",
    "ะพะฑะฝะธะผะฐัะบะฐ ะฝะฐ ะฝะพะถะบะฐั๐ค",
    "ัะฐะผะฐั ัะฐะฝะธะผะฐั ะดััะฐ๐ฅบ",
    "ะฝะพัะธะบ-ะบะฝะพะฟะพัะบะฐ ะดะฝั๐",
    "ะดะตะฒะพัะบะฐ, ะบะพัะพัะพะน ัะพัะตััั ัะฐะน ะฝะฐะปะธัั๐ต",
    "ัะตัะดัะต ะฝะฐ ัะฐัะฟะฐัะบั๐",
    "ัะปะฐะดะพััั ั ะฝะฐัะธะฝะบะพะน ะธะท ะณััััะธ๐ฌ",
    "ะพะฑะปะฐะบะพ ะฝะตะถะฝะพััะธโ๏ธ",
    "ะผะธะปะฐัะบะฐ ะดะฝั๐งธ",
    "ััะฟะปัะน ะฟะปะตะด ััะตะดะธ ััะพัะผะฐ๐ซ",
    "ัะปัะฑะบะฐ, ะทะฐ ะบะพัะพััั ะฟัะพัะฐะตัั ะฒัั๐",
    "ะดะตะฒะพัะบะฐ-ะพะฑะฝะธะผะฐัะบะฐ๐ค",
    "ัะฐะผะฐั ะดัะฐะผะฐัะธัะฝะฐั๐ญ",
    "ะบะฐะฟัะธะทัะปั ะดะฝั๐",
    "ะดะตะฒะพัะบะฐ ั ะฟะปะฐะฝะพะผ (ะธ ะฑะฐััะตัะพะผ)๐",
    "ะฒัััะฐั ะปะธะณะฐ ัะตะผะธะฝะธะทะผะฐ๐งโโ๏ธ",
    "ัะฐ, ะบัะพ ะดะตะปะฐะตั ะผะพะทะณะธ๐ฅด",
    "ัะฐะปัะฝะฐั ะธะผะฟะตัะฐััะธัะฐ๐",
    "ะณะปะฐะฒะฝะฐั ะทะฒะตะทะดะฐ ัะฐัะฐ๐",
    "ัะฐะผะฐั ะทะฐะฝััะฝะฐั ะธะฝััะธะณะฐะฝะบะฐ๐งฉ",
    "ะดะตะฒะพัะบะฐ ั ะบะพัะพะฝะพะน ะฟะพ ัะผะพะปัะฐะฝะธั๐ธ",
    "ัะตั ั ะฑะดัะผ-ะบััะปััะผะธ๐งโโ๏ธ",
    "ะทะฐะบะพะปะดะพะฒะฐะฝะฝะฐั ะบะพัะปะตัะบะฐ๐",
    "ะฒะพะปัะตะฑะฝะธัะฐ ัััะฝัั ะฒะตัะตัะพะฒ๐",
    "ะผะธััะธัะตัะบะฐั ะฑะพะณะธะฝั ัะฝะฐ๐ด",
    "ะฒะตะดัะผะฐ ะฝะฐ ะผะธะฝะธะผะฐะปะบะฐั๐งโโ๏ธ",
    "ะฒะตะดัะผะฐ, ะบะพัะพัะฐั ะฝะต ะฒะฐัะธั ะฑะพัั๐งน",
    "ะดะตะฒะพัะบะฐ-ะทะตะปัะต๐งช",
    "ัะฐ, ััะพ ัะฐะฝััะตั ะฟะพะด ะปัะฝะพะน๐",
    "ะดะตะฒะพัะบะฐ-ะพะน-ะฒัั๐",
    "ะฟะธะฟะธัะบะฐ ะฝะฐ ะบะฐะฑะปัะบะฐั๐",
    "ะณััััะฝัะน ะบะพัะธะบ ะฒ ัะตะปะต ััะตัะฒั๐ฟ",
    "ัะฐ, ััะพ ะฝะต ะพัะฒะตัะฐะตั๐โโ๏ธ",
    "ะบัะธะฝะถ-ะบะพัะพะปะตะฒะฐ๐ซ",
    "ัะฐัะธะบ ััะตะฒะพะถะฝะพััะธ๐",
    "ัะธััะฐั ะถะพะฟะบะฐ๐",
    "ะฟัััะพะต ะผะตััะพ๐จ",
    "ะฟะพะทะพั ะบะปะฐะฝะฐ๐คก",
    "ะพัะธะฑะบะฐ ะฟัะธัะพะดัโ๏ธ",
    "ัะธะฐัะบะพ ะดะฝั๐",
    "ัะพะดััะธะน ะบัะธะฝะถ๐ซ",
    "ะผะธะฝัั ะฒ ะบะฐัะผั๐",
    "ะฝะตัะดะฐัะฐ ะฝะตะดะตะปะธ๐",
    "ัะท ะบัะพ ะธ ะทะฐัะตะผ ััั๐",
    "ะฟัะธัะธะฝะฐ ัััะดะฐ ัะตะณะพะดะฝั๐ฌ",
    "ะฑะฐะณ ะฒ ะผะฐััะธัะต๐ณ",
    "ะณะปะฐะฒะฝัะน ะฟะพะฒะพะด ะดะปั ัะตะนัะฟะฐะปะผะฐ๐คฆโโ๏ธ",
    "ัะฐะผะฐั ะฑะตัััะฐั๐งฟ",
    "ัะตะนะป ะฒะตะบะฐ๐ต",
    "ะฐะฝัะธ-ะทะฒะตะทะดะฐ ัะฐัะฐ๐ซ",
    "ะฟัะพะบะปััะธะต ะดะฝั๐งโโ๏ธ",
    "ะบะฐัะฐัััะพัะฐ ะฒ ัะฑะบะต๐ช",
    "ะฟะพะฒะพะด ะฒัะนัะธ ะธะท ัะฐัะฐ๐ช",
    "ัะพะฝะพะฒัะน ััะผ๐",
    "ะณะปัะบ ัะธััะตะผั๐ฅ",
    "ะฝะตะดะพัะฐะทัะผะตะฝะธะต ั ะฒะฐะนะฑะพะผ๐ตโ๐ซ",
    "ัะฐะฝะดะพะผะฝะฐั npc๐ป",
    "ะฑะฐะณ ั ะปะธัะพะผ๐ซฅ",
    "ััะพะฝ ะฟะพ ะณะปะฐะทะฐะผ๐",
    "ัะฐ, ะบะพะณะพ ะปัััะต ะฝะต ะฒัะฟะพะผะธะฝะฐัั๐ป",
    "ะผะพัะฐะปัะฝัะน ะฒะธััั๐ฆ",
    "ัะพะผะฝะธัะตะปัะฝะฐั ะปะธัะฝะพััั๐ณ",
    "ะฑะฐะฝ ะฑะตะท ััะดะฐ ะธ ัะปะตะดััะฒะธั๐ท"
]

async def role(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if not context.args:
        await update.message.reply_text("ะัะฟะพะปัะทัะน: /role @username")
        return
    raw = context.args[0]
    target = raw if raw.startswith("@") else ("@" + raw)
    await update.message.reply_text(f"{target} ัะตะณะพะดะฝั {random.choice(ROLES)}")

# ===================== ะะะะฌ ะะะะะะะะฏ (ะตะถะตะดะฝะตะฒะฝะฐั ะฟัะพะฒะตัะบะฐ) =====================
def _parse_day_month(bday: str):
    """ะะพะทะฒัะฐัะฐะตั (day, month) ะตัะปะธ ัะดะฐะปะพัั, ะธะฝะฐัะต None."""
    if not bday:
        return None
    bday = bday.strip()
    for fmt in ("%d.%m.%Y", "%d.%m"):
        try:
            dt = datetime.strptime(bday, fmt)
            return dt.day, dt.month
        except Exception:
            pass
    return None

async def birthday_job(context: ContextTypes.DEFAULT_TYPE):
    today = date.today()
    for suid, u in state["users"].items():
        dm = _parse_day_month(u.get("bday", ""))
        if not dm:
            continue
        d, m = dm
        if d == today.day and m == today.month:
            name = u.get("name") or display_user(int(suid))
            text = f"๐ ะกะตะณะพะดะฝั ะดะตะฝั ัะพะถะดะตะฝะธั ั {name}! ะะพะถะตะปะฐะตะผ ััะฐัััั, ะปัะฑะฒะธ ะธ ะฟะพะฑะตะด! ๐ฅณ"
            try:
                await context.bot.send_message(chat_id=CHAT_ID, text=text, parse_mode="HTML")
            except Exception as e:
                logger.warning(f"ะะต ัะดะฐะปะพัั ะพัะฟัะฐะฒะธัั ะฟะพะทะดัะฐะฒะปะตะฝะธะต: {e}")

# ===================== ะะะะะกะขะะะฆะะฏ ะ ะะะะฃะกะ =====================
def build_application():
    app = ApplicationBuilder().token(TOKEN).build()

    # ะัะธะฒะตัััะฒะธั ะฝะพะฒัั
    app.add_handler(ChatMemberHandler(greet_new_member, ChatMemberHandler.CHAT_MEMBER))

    # ะัะพัะธะปั (ะฟะพัะฐะณะพะฒะพ) โ ะดะพะฑะฐะฒะปัะตะผ ัะฐะฝััะต, ัะตะผ ััะตะบะตั ัะพะพะฑัะตะฝะธะน
    edit_conv = ConversationHandler(
        entry_points=[CommandHandler("editprofile", editprofile)],
        states={
            STEP_NAME: [MessageHandler(filters.TEXT & ~filters.COMMAND, step_name)],
            STEP_NICK: [MessageHandler(filters.TEXT & ~filters.COMMAND, step_nick)],
            STEP_UID:  [MessageHandler(filters.TEXT & ~filters.COMMAND, step_uid)],
            STEP_BDAY: [MessageHandler(filters.TEXT & ~filters.COMMAND, step_bday)],
            STEP_CITY: [MessageHandler(filters.TEXT & ~filters.COMMAND, step_city)],
            STEP_TIKTOK: [MessageHandler(filters.TEXT & ~filters.COMMAND, step_tiktok)],
            STEP_QUOTE: [MessageHandler(filters.TEXT & ~filters.COMMAND, step_quote)],
        },
        fallbacks=[],
    )
    app.add_handler(edit_conv)
    app.add_handler(CommandHandler("profile", profile))

    # ะะฐะทะพะฒัะต ะบะพะผะฐะฝะดั
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("about", about))
    app.add_handler(CommandHandler("rules", rules))

    # ะคะฐะฝ
    app.add_handler(CommandHandler("pipisa", pipisa))
    app.add_handler(CommandHandler("top5", top5))
    app.add_handler(CommandHandler("rating", rating))
    app.add_handler(CommandHandler("predskaz", predskaz))
    app.add_handler(CommandHandler("hugs", hugs))
    app.add_handler(CommandHandler("compliment", compliment))
    app.add_handler(CommandHandler("lesbi", lesbi))
    app.add_handler(CommandHandler("role", role))

    # ะขัะตะบะตั ัะพะพะฑัะตะฝะธะน (ะฟะพัะปะตะดะฝะธะผ โ ััะพะฑั ะฝะต ัะฑะธะฒะฐัั ConversationHandler)
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, track_speaker))

    # JobQueue โ ะฟะพะทะดัะฐะฒะปะตะฝะธั ั ะะ (ะบะฐะถะดะพะต ัััะพ ะฒ 09:00 ะฟะพ ะฒัะตะผะตะฝะธ ัะตัะฒะตัะฐ)
    app.job_queue.run_daily(birthday_job, time(hour=9, minute=0))

    return app

if __name__ == "__main__":
    application = build_application()
    print("OnlyGirls bot ะทะฐะฟััะตะฝโฆ")
    application.run_polling()
