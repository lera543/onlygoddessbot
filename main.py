import logging
import random
import datetime
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes, MessageHandler, filters, CallbackQueryHandler, ConversationHandler

TOKEN = "8215387975:AAHS_mMHzXBGtDVevEBiSwsLcLPChs7Yq7k"
CHAT_ID = -1001849339863

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

users = {}
married = set()
lesbi_couples = {}
last_prediction_date = {}
last_lesbi_date = None

with open("predictions.txt", "r", encoding="utf-8") as f:
    PREDICTIONS = f.read().split("\n")

TAROT_CARDS = [
    ("–®—É—Ç ü§°", "–Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å, –Ω–∞–∏–≤–Ω–æ—Å—Ç—å", "–±–µ–∑—Ä–∞—Å—Å—É–¥—Å—Ç–≤–æ, –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å"),
    ("–ú–∞–≥ üßô", "–≤–æ–ª—è, –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ, —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è", "–º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏, –æ–±–º–∞–Ω, –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å"),
    ("–ñ—Ä–∏—Ü–∞ üîÆ", "–∏–Ω—Ç—É–∏—Ü–∏—è, —Ç–∞–π–Ω–∞, –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –º—É–¥—Ä–æ—Å—Ç—å", "—Å–∫—Ä—ã—Ç–Ω–æ—Å—Ç—å, –æ—Ç—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ—Å—Ç—å"),
    ("–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ üëë", "–∏–∑–æ–±–∏–ª–∏–µ, –∑–∞–±–æ—Ç–∞, –ø–ª–æ–¥–æ—Ä–æ–¥–∏–µ", "–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"),
    ("–ò–º–ø–µ—Ä–∞—Ç–æ—Ä üß±", "–≤–ª–∞—Å—Ç—å, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –∑–∞—â–∏—Ç–∞", "–¥–µ—Å–ø–æ—Ç–∏–∑–º, –∂–µ—Å—Ç–∫–æ—Å—Ç—å"),
    ("–ñ—Ä–µ—Ü üôè", "–¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å, —Ç—Ä–∞–¥–∏—Ü–∏–∏, –∑–Ω–∞–Ω–∏–µ", "–¥–æ–≥–º–∞—Ç–∏–∑–º, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ—Å—Ç—å"),
    ("–í–ª—é–±–ª—ë–Ω–Ω—ã–µ üíû", "–ª—é–±–æ–≤—å, –≤—ã–±–æ—Ä, –µ–¥–∏–Ω—Å—Ç–≤–æ", "—Ä–∞–∑–¥–æ—Ä, –Ω–µ—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"),
    ("–ö–æ–ª–µ—Å–Ω–∏—Ü–∞ üõû", "–ø–æ–±–µ–¥–∞, –¥–≤–∏–∂–µ–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å", "–ø–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç—Ä–æ–ª—è, –∞–≥—Ä–µ—Å—Å–∏—è"),
    ("–°–∏–ª–∞ ü¶Å", "—Å–º–µ–ª–æ—Å—Ç—å, —Ç–µ—Ä–ø–µ–Ω–∏–µ, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å", "—Å–æ–º–Ω–µ–Ω–∏–µ, —Å—Ç—Ä–∞—Ö"),
    ("–û—Ç—à–µ–ª—å–Ω–∏–∫ üïØÔ∏è", "–ø–æ–∏—Å–∫ –∏—Å—Ç–∏–Ω—ã, —É–µ–¥–∏–Ω–µ–Ω–∏–µ", "–∏–∑–æ–ª—è—Ü–∏—è, –∑–∞–º–∫–Ω—É—Ç–æ—Å—Ç—å"),
    ("–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã üé°", "—Å—É–¥—å–±–∞, –ø–µ—Ä–µ–º–µ–Ω—ã, —É–¥–∞—á–∞", "–Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å, –∑–∞—Å—Ç–æ–π"),
    ("–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å ‚öñÔ∏è", "—Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ, —á–µ—Å—Ç–Ω–æ—Å—Ç—å", "–Ω–µ—á–µ—Å—Ç–Ω–æ—Å—Ç—å, –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç—å"),
    ("–ü–æ–≤–µ—à–µ–Ω–Ω—ã–π üôÉ", "–∂–µ—Ä—Ç–≤–∞, –ø–∞—É–∑–∞, –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏–µ", "–∑–∞—Å—Ç–æ–π, –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç—å"),
    ("–°–º–µ—Ä—Ç—å üíÄ", "–∫–æ–Ω–µ—Ü, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ", "—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–∞–º"),
    ("–£–º–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å üßò", "–≥–∞—Ä–º–æ–Ω–∏—è, –±–∞–ª–∞–Ω—Å, —Ç–µ—Ä–ø–µ–Ω–∏–µ", "–¥–∏—Å–±–∞–ª–∞–Ω—Å, —á—Ä–µ–∑–º–µ—Ä–Ω–æ—Å—Ç—å"),
    ("–î—å—è–≤–æ–ª üòà", "–∏—Å–∫—É—à–µ–Ω–∏–µ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, —Å—Ç—Ä–∞—Å—Ç—å", "–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ, –∫–æ–Ω—Ç—Ä–æ–ª—å"),
    ("–ë–∞—à–Ω—è üóº", "–≤–Ω–µ–∑–∞–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω—ã, –∫—Ä–∞—Ö", "–∏–∑–±–µ–∂–∞–Ω–∏–µ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è"),
    ("–ó–≤–µ–∑–¥–∞ üåü", "–Ω–∞–¥–µ–∂–¥–∞, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –∏—Å—Ü–µ–ª–µ–Ω–∏–µ", "–ø–µ—Å—Å–∏–º–∏–∑–º, –ø–æ—Ç–µ—Ä—è –≤–µ—Ä—ã"),
    ("–õ—É–Ω–∞ üåô", "–∏–ª–ª—é–∑–∏–∏, —Å—Ç—Ä–∞—Ö–∏, –∏–Ω—Ç—É–∏—Ü–∏—è", "–∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ, —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å"),
    ("–°–æ–ª–Ω—Ü–µ ‚òÄÔ∏è", "—Ä–∞–¥–æ—Å—Ç—å, —É—Å–ø–µ—Ö, –ø—Ä–æ—Å–≤–µ—Ç–ª–µ–Ω–∏–µ", "—Å–∞–º–æ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ, —É–ø—Ä—è–º—Å—Ç–≤–æ"),
    ("–°—É–¥ ‚ö∞Ô∏è", "–ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ, –∏—Å–∫—É–ø–ª–µ–Ω–∏–µ, —Å—É–¥—å–±–∞", "—Å–æ–∂–∞–ª–µ–Ω–∏–µ, —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–º–µ–Ω"),
    ("–ú–∏—Ä üåç", "–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å, —É—Å–ø–µ—Ö", "–Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç—å, –∑–∞–¥–µ—Ä–∂–∫–∏")
]

PROFILE_QUESTIONS = [
    "–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç? (–∏–º—è)",
    "–ö–∞–∫–æ–π —É —Ç–µ–±—è –Ω–∏–∫ –≤ –∏–≥—Ä–µ?", 
    "–ö–∞–∫–æ–π —É —Ç–µ–±—è UID?", 
    "–ö–æ–≥–¥–∞ —É —Ç–µ–±—è –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è? (–Ω–∞–ø—Ä–∏–º–µ—Ä, 01.01.2000)",
    "–ò–∑ –∫–∞–∫–æ–≥–æ —Ç—ã –≥–æ—Ä–æ–¥–∞?",
    "–û—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π TikTok –∏–ª–∏ Instagram:",
    "–ö–æ–≥–¥–∞ —Ç—ã –≤—Å—Ç—É–ø–∏–ª–∞ –≤ —á–∞—Ç? (–Ω–∞–ø—Ä–∏–º–µ—Ä, 01.08.2025)",
    "–ü–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º –¥–µ–≤–∏–∑–æ–º –∏–ª–∏ –ª—é–±–∏–º–æ–π —Ü–∏—Ç–∞—Ç–æ–π:"
]

HUGS_MESSAGES = [
    "–û–±–Ω–∏–º–∞—é —Ç–µ–±—è –∫—Ä–µ–ø–∫–æ-–∫—Ä–µ–ø–∫–æ ü´Ç –í—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ!",
    "–¢–µ–±—è –∫—Ç–æ-—Ç–æ –æ–±–Ω–∏–º–∞–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å ü§ó –ù–∞–¥–µ—é—Å—å, —Ç–µ–±–µ —Å—Ç–∞–ª–æ —Ç–µ–ø–ª–µ–µ!",
    "–ú—è–≥–∫–∏–µ –æ–±–Ω–∏–º–∞—à–∫–∏ –Ω–∞ —Ç–≤–æ–π –¥–µ–Ω—å! üß∏ –¢—ã —Å—É–ø–µ—Ä!",
    "–í–æ—Ç —Ç–∞–∫ –Ω–µ–∂–Ω–æ –∏ –∑–∞–±–æ—Ç–ª–∏–≤–æ ‚Äî –æ–±–Ω–∏–º–∞—é üíû",
    "–ö—Ç–æ –Ω–µ –æ–±–Ω–∏–º–µ—Ç—Å—è ‚Äî —Ç–æ—Ç –Ω–µ –∏–≥—Ä–∞–µ—Ç –≤ –∫–∞—Å—Ç–æ–º–∫–µ!",
    "ü´Ç –¢–æ–∫—Å–∏–∫–æ–≤ —Ç–æ–∂–µ –∏–Ω–æ–≥–¥–∞ –æ–±–Ω–∏–º–∞—é—Ç‚Ä¶ –ø–æ –≥–æ–ª–æ–≤–µ‚Ä¶ —Ç–∞–±—É—Ä–µ—Ç–∫–æ–π üôÉ"
]

PIPISA_UP_REACTIONS = [
    "–ü–∏–ø–∏—Å–∞ –≤—ã—Ä–æ—Å–ª–∞ –∫–∞–∫ –Ω–∞ –¥—Ä–æ–∂–∂–∞—Ö! üçÜ‚ú®",
    "–û–≥–æ! –¢–∞–∫–∞—è –ø—Ä–∏–±–∞–≤–∫–∞, –∞–∂ –≤ —á–∞—Ç–µ —Ç–µ–ø–ª–æ —Å—Ç–∞–ª–æ üò≥",
    "–ü–∏–ø–∏—Å–∞ —Ç—è–Ω–µ—Ç—Å—è –∫ —Å–æ–ª–Ω—Ü—É! ‚òÄÔ∏è",
    "–°–µ–≥–æ–¥–Ω—è —É–¥–∞—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è —Ä–æ—Å—Ç–∞! üìà"
]

PIPISA_DOWN_REACTIONS = [
    "–£–ø—Å... —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ üò¨",
    "–ü–∏–ø–∏—Å–∞ —Å–∂–∞–ª–∞—Å—å –æ—Ç —Ö–æ–ª–æ–¥–∞ ü•∂",
    "–ì—Ä—É—Å—Ç–Ω—ã–π –¥–µ–Ω—å, –¥–∞–∂–µ –ø–∏–ø–∏—Å–∞ –ø–æ–Ω–∏–∫–ª–∞ üò¢",
    "–ù–∏—á–µ–≥–æ, –∑–∞–≤—Ç—Ä–∞ –≤—ã—Ä–∞—Å—Ç–µ—Ç —Å–Ω–æ–≤–∞! üí™"
]

# –î–∞–ª—å—à–µ –∏–¥—É—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏: start, profile, editprofile, grow, top5, rating –∏ —Ç.–¥.
# ... (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏)

# –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—ã
app = ApplicationBuilder().token(TOKEN).build()

app.add_handler(CommandHandler("start", start))
app.add_handler(CommandHandler("profile", profile))
app.add_handler(CommandHandler("editprofile", editprofile))
app.add_handler(CommandHandler("grow", grow))
app.add_handler(CommandHandler("top5", top5))
app.add_handler(CommandHandler("rating", fullrating))
app.add_handler(CommandHandler("predskaz", predskaz))
app.add_handler(CommandHandler("tarot", tarot))
app.add_handler(CommandHandler("rules", rules))
app.add_handler(CommandHandler("about", about))
app.add_handler(CommandHandler("lesbi", lesbi))
app.add_handler(CommandHandler("hugs", hugs))
app.add_handler(CommandHandler("love", love))
app.add_handler(CommandHandler("divorce", divorce))
app.add_handler(CommandHandler("confirmdivorce", confirmdivorce))

app.run_polling()
